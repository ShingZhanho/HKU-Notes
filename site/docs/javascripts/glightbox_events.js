document$.subscribe(function () {
    // wait for the document to be loaded
    const glightbox = lightbox; // the GLightbox instance is generated by mkdocs-glightbox
    let currentIndex = 0;

    glightbox.on('slide_changed', ({_, current}) => {
        currentIndex = current.index;
    });

    glightbox.on('close', () => {
        const element = document.querySelector('.preview__image#item-' + currentIndex);
        if (element) {
            element.scrollIntoView({behavior: 'smooth', block: 'center'});
        }
    });
})