% =============================================================
% Title formats
% =============================================================
\titleformat{\section}
	{\Large\sffamily\bfseries}
	{}
	{0em}
	{{\parbox{\dimexpr\linewidth-2\fboxsep\relax}{\thesection.\space#1}}}
	[]

\titleformat{name=\section,numberless}
	{\Large\sffamily\bfseries}
	{}
	{0em}
	{{\parbox{\dimexpr\linewidth-2\fboxsep\relax}{#1}}}
	[]

\titleformat{\subsection}
	{\sffamily\bfseries\large}
	{\thesubsection}
	{0em}
	{{\parbox{\dimexpr\linewidth-2\fboxsep\relax}{#1}}}
	[]

\titleformat{name=\subsection,numberless}
    {\sffamily\bfseries\large}
    {}
    {0em}
    {{\parbox{\dimexpr\linewidth-2\fboxsep\relax}{#1}}}
    []

\titleformat{\subsubsection}
	{\sffamily\bfseries}
	{\thesubsubsection}
	{0.5em}
	{#1}
	[]

\makeatletter
\titlespacing*{\section}{0pc}{3ex \@plus4pt \@minus3pt}{5pt}
\makeatother

% =============================================================
% Exam package
% =============================================================
\bracketedpoints
\pointname{\%}
\unframedsolutions
\qformat{\bfseries\sffamily \thequestiontitle \newline}
\newcommand{\mcqAns}[1]{\fbox{\bfseries\sffamily #1}}

% =============================================================
% Enumerate package
% =============================================================
\setlist{nosep}
\newenvironment{enumroman}{
	\begin{enumerate}[label=(\roman*)]
}{
	\end{enumerate}
}

% =============================================================
% Graphicsx package
% =============================================================
\graphicspath{{figs/}}
\newcommand{\figHere}[2]{
	\begin{figure}[H]
		\centering
		\includegraphics[#2]{#1}
	\end{figure}
}

% =============================================================
% Configures ToC
% =============================================================
\renewcommand*\contentsname{By-year Index}
\newlength{\tocsep}
\setlength{\tocsep}{1.5pc}
\setcounter{tocdepth}{2}
\contentsmargin{0pt}
\titlecontents{section}[\tocsep]
	{\bfseries\sffamily\large}
	{\contentslabel[\thecontentslabel]{\tocsep}}
	{}
	{\hfill\thecontentspage}
	[]

\titlecontents*{subsection}[2\tocsep]
	{\sffamily}
	{}
	{}
	{}
	[\ \textbullet\ ]

% =============================================================
% Tcolorbox package
% =============================================================
\tcbuselibrary{skins}
\tcbset{skin=enhanced}
\newtcbox{\tcPrimaryTag}{enhanced,nobeforeafter,tcbox raise base,boxrule=0.5pt,top=0mm,bottom=0mm,
  right=0mm,left=2.5mm,arc=1pt,boxsep=2pt,before upper={\vphantom{dlg}},
  colframe=green!50!black,coltext=green!10!black,colback=green!40!white,
  overlay={\begin{tcbclipinterior}\fill[green!75!blue!80!white] (frame.south west)
    rectangle node[text=white,font=\sffamily\bfseries\footnotesize] {\kern.2ex\#} ([xshift=3mm]frame.north west);\end{tcbclipinterior}}}
\newtcbox{\tcSecondaryTag}{enhanced,nobeforeafter,tcbox raise base,boxrule=0.4pt,top=0mm,bottom=0mm,
  right=0mm,left=2.5mm,arc=1pt,boxsep=2pt,before upper={\vphantom{dlg}},
  colframe=green!50!black,coltext=green!25!black,colback=green!10!white,
  overlay={\begin{tcbclipinterior}\fill[green!75!blue!50!white] (frame.south west)
    rectangle node[text=white,font=\sffamily\bfseries\footnotesize] {\kern.2ex\#} ([xshift=3mm]frame.north west);\end{tcbclipinterior}}}

% =============================================================
% Commands for handling By-topic Index
% =============================================================
\indexsetup{othercode=\sffamily}
\newcommand{\currentQLabel}{}
\newcommand{\currentQRef}{}
\newcommand{\qref}[3]{\hyperref[#1]{#2}}
\newcommand{\primaryTag}[2]{\tcPrimaryTag{\footnotesize\bfseries\sffamily\raisebox{-0.1ex}{#1}}\expanded{\noexpand\index{#2|qref{\currentQLabel}{\currentQRef}}}}
\newcommand{\secondaryTag}[3]{\tcSecondaryTag{\footnotesize\sffamily\raisebox{-0.1ex}{#1}}\expanded{\noexpand\index{#2!#3|qref{\currentQLabel}{\currentQRef}}}}
\newcommand{\startYear}[1]{
	\section*{#1}
	\addcontentsline{toc}{section}{#1}
	\label{#1}
}
\newcommand{\startQuestion}[3]{ % #1: year, #2: month, #3: question number
	\renewcommand{\currentQRef}{#1#2#3}
	\renewcommand{\currentQLabel}{#1-#2-#3}
	\titledquestion{#1 #2 #3}
	\addcontentsline{toc}{subsection}{#3}
	\label{#1-#2-#3}
}
\newcommand{\startQwTags}[4]{ % #1: year, #2: month, #3: question number, #4: tags
	\renewcommand{\currentQRef}{#1#2#3}
	\renewcommand{\currentQLabel}{#1-#2-#3}
	\titledquestion{#1 #2 #3}
	\addcontentsline{toc}{subsection}{#3}
	\label{#1-#2-#3}
	\begin{flushright}
		#4
	\end{flushright}
}
\makeindex[title=By-topic Index,columns=2]