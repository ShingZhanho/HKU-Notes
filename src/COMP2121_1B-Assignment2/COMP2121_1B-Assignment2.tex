\documentclass[answers]{exam}
\input{packages.tex}
\input{preambles.tex}

\begin{document}

\begin{center}
    \textbf
    {\Large{COMP2121 Discrete Mathematics} \\
    \large{25/26 Semester 1} \\
    \large{Assignment 2}}\\
    SHING, Zhan Ho Jacob \qquad 3036228892
\end{center}

\begin{questions}
    
    \question Basics on Functions

    \begin{parts}
        
        \part[4] For the function $h_2:\Z\to\Z$, \[
            h(n)=\begin{cases}
                \frac{1}{3}n,\quad&\text{if }n\text{ is divisible by 3},\\
                3n,\quad&\text{if }n\text{ is not divisible by 3},
            \end{cases}
        \]
        identify its \begin{enumerate*}[label=(\arabic*)]
            \item range,
            and whether it is 
            \item injective,
            \item surjective,
            \item bijective;
            if your answer is no, explain why.
        \end{enumerate*}

        \begin{solution}
            \begin{enumerate}[label=(\arabic*)]
                \item \textbf{Case 1:} $n$ is divisible by 3, i.e., $ \forall k\in\Z :n=3k$.
                Then, $h(n)=\frac{1}{3}(3k)=k$, which may or may not be divisible by 3.

                \textbf{Case 2:} $n$ is not divisible by 3 and $n=3k+1$ for some $k\in\Z$.
                Then, $h(n)=3(3k+1)=9k+3$, which is divisible by 3.

                \textbf{Case 3:} $n$ is not divisible by 3 and $n=3k+2$ for some $k\in\Z$.
                Then, $h(n)=3(3k+2)=9k+6$, which is also divisible by 3.

                Thus, $h(n)$ is either divisible by 3 or not divisible by 3.
                \fbox{Therefore, the range of $h$ is $\Z$.}

                \item We can easily find a counterexample, e.g., $h(1)=h(9)=3$.
                Thus, \fbox{$h_2$ is not injective}.

                \item By sub-problem (1), we have shown that the range of $h_2$ is $\Z$,
                which is the same as the codomain of $h_2$. By definition, \fbox{$h_2$ is surjective}.

                \item Since $h_2$ is not injective, by definition, \fbox{$h_2$ is not bijective}.
            \end{enumerate}
        \end{solution}

        \newpage

        \part[6] Functions $f:\R\to\R$ and $g:\R\to\R$ are defined as follows.
        Determine by formulas the compositions $f\circ g$ and $g\circ g$.
        \[
            f(x)=(x+2)^2\quad\text{and}\quad g(x)=\begin{cases}
                2x-6,\quad&\text{if }x\geq1,\\
                -x-1,\quad&\text{if }x<1.
            \end{cases}
        \]

        \begin{solution}
            \begin{enumerate}[label=(\arabic*)]
                \item $\bm{f\circ g}$\textbf{:}
                \[
                    (f\circ g)(x)=\boxed{
                        \begin{cases}
                            (2x-4)^2,\quad&\text{if }x\geq1,\\
                            (-x+1)^2,\quad&\text{if }x<1.
                        \end{cases}
                    }
                \]

                \item $\bm{g\circ g}$\textbf{:}
                
                Note that $g(x)\geq1$ when $2x-6\geq1\Rightarrow x\geq\frac{7}{2}\geq1$
                and when $-x-1\geq1\Rightarrow x\leq-2$.

                Also, $g(x)<1$ when $2x-6<1\Rightarrow 1\leq x<\frac{7}{2}$
                and when $-x-1<1\Rightarrow 1>x> -2$.

                Thus, the piecewise function $g\circ g$ has cases: $x\in(-\infty, -2]$,
                $x\in(-2, 1)$, $x\in[1, \frac{7}{2})$, and $x\in[\frac{7}{2}, +\infty)$.

                \textbf{Case 1:} $x\in(-\infty, -2]$. We have $g(x)\geq1$, so
                $g(g(x))=2(-x-1)-6=-2x-8$.

                \textbf{Case 2:} $x\in(-2, 1)$, We have $g(x)<1$, so
                $g(g(x))=-(-x-1)-1=x$.

                \textbf{Case 3:} $x\in[1,\frac{7}{2})$. We have $g(x)<1$, so
                $g(g(x))=-(2x-6)-1=-2x+5$.

                \textbf{Case 4:} $x\in[\frac{7}{2}, +\infty)$. We have $g(x)\geq1$, so
                $g(g(x))=2(2x-6)-6=4x-18$.

                Putting all cases together, we have \[
                    (g\circ g)(x) = \boxed{
                        \begin{cases}
                            -2x-8,\quad&\text{if }x\leq-2,\\
                            x,\quad&\text{if }-2<x<1,\\
                            -2x+5,\quad&\text{if }1\leq x<\frac{7}{2},\\
                            4x-18,\quad&\text{if }x\geq\frac{7}{2}.
                        \end{cases}
                    }
                \]
            \end{enumerate}
        \end{solution}

    \end{parts}

    \newpage

    \question Relations and Functions

    Prove or disprove the following statements.

    \begin{parts}
        
        \part[4] For arbitrary function $f:\Z\to\Z$, the relation defined by \[
            R=\set{(x,y)\in\Z\times\Z\mid f(x)-f(y)\text{ is even}}
        \] is reflexive and transitive.

        \begin{solution}
            \textbf{Reflexivity:} Recall one of the properties of a function $f:A\to B$ defined by a relation $R_0$ is that
            $\forall x\in A, y_1,y_2\in B:[(x\rel[R_0] y_1)\land(x\rel[R_0] y_2)\rightarrow (y_1=y_2)]$.
            Therefore, for any pair $(x,y)$ where $x,y\in\Z$ and $x=y$, we must have
            $f(x)=f(y) \Rightarrow f(x)-f(y)=0$, which is even. Thus, $x\rel x$ for all $x\in\Z$.
            By definition, \fbox{$R$ is reflexive}.

            \textbf{Transitivity:} Let $a,b,c\in\Z$ be arbitrary. Note that for $x\rel y$ to hold,
            $f(x)$ and $f(y)$ must either be both even or both odd. Also note that the image of $f:\Z\to\Z$
            must be integers, which must either be even or odd. Then, when $a\rel b$ holds, we must have
            that the parity of $f(a)$ and $f(b)$ are the same. Similarly, when $b\rel c$ holds,
            we must have that the parity of $f(b)$ and $f(c)$ are the same. Thus, the parity of $f(a)$ and $f(c)$
            must also be the same, which implies that $a\rel c$ holds. By definition, \fbox{$R$ is transitive}.

            \textbf{Conclusion:} Since $R$ is both reflexive and transitive, \fbox{the statement is true}.
        \end{solution}

        \part[4] For arbitrary function $f:\Z\to\Z$, the relation defined by \[
            R=\set{(x,y)\in\Z\times\Z\mid f(x)\cdot f(y)\in\set{-1, 0, 1}}
        \] is symmetric and transitive.

        \begin{solution}
            Observe that for $f(x)\cdot f(y)=1$ to hold, $f(x)$ and $f(y)$ must both have the magnitude of 1
            and the same sign. Similarly, for $f(x)\cdot f(y)=-1$ to hold, $f(x)$ and $f(y)$ must both have
            the magnitude of 1 but different signs. Finally, for $f(x)\cdot f(y)=0$ to hold, at least one of
            $f(x)$ and $f(y)$ must be 0. That is,
            $f(x), f(y)\in\set{-1,0,1}\leftrightarrow f(x)\cdot f(y)\in\set{-1,1}$, and
            $[(f(x)=0)\lor(f(y)=0)]\leftrightarrow f(x)\cdot f(y)=0$.

            \textbf{Symmetry:} We need to show that $x\rel y\rightarrow y\rel x$ holds for all $x,y\in\Z$.
            We try to prove by contradiction. Suppose $x\rel y$ holds but we have $y\notrel x$.
            For the case when $f(x)\cdot f(y)\in\set{-1,1}$, from $x\rel y$, we have
            $f(x), f(y)\in\set{-1,1}$. Then, $f(y)\cdot f(x)\in\set{-1,1}$, which implies that
            $y\rel x$ must hold. Then, for the case when $f(x)\cdot f(y)=0$, from $x\rel y$, we have
            either or both of $f(x)$ and $f(y)$ equal to 0. Without loss of generality, suppose $f(x)=0$.
            Then, $f(y)\cdot f(x)=f(y)\cdot 0=0$, which implies that $y\rel x$ must hold.
            Then, we have shown that in both cases, $y\rel x$ must hold. This contradicts our assumption
            that $y\notrel x$. Therefore, \fbox{$R$ is symmetric}.

            \textbf{Transitivity:} The transitivity can be easily disproved by a counterexample.
            Define $f_0:\Z\to\Z$ as: \[
                f_0(x) = \begin{cases}
                    5,\quad&\text{if }x\neq0,\\
                    0,\quad&\text{if }x=0.
                \end{cases}
            \]
            Then, we have $f_0(-1)\cdot f_0(0)=0\in\set{-1,0,1}$ and $f_0(0)\cdot f_0(1)=0\in\set{-1,0,1}$,
            so $-1\rel 0$ and $0\rel 1$ hold. However, $f_0(-1)\cdot f_0(1)=5\cdot5=25\notin\set{-1,0,1}$,
            so $-1\notrel 1$. Therefore, \fbox{$R$ is not transitive}.

            \textbf{Conclusion:} Since $R$ is symmetric but not transitive, \fbox{the statement is false}.
        \end{solution}

    \end{parts}

    \newpage

    \question Image of a Set

    Let $f:A\to B$ be a function. Consider an arbitrary set $A'\subseteq A$.
    The image of set $A'$ is defined to be the set \[
        f(A')=\set{y\in B\mid \exists x\in A'\text{ such that }y=f(x)}.
    \]

    \begin{parts}
        
        \part[4] Let $A=\set{1,2,3}$, $B=\set{a,b,c}$, $A_1=\set{1,2}$, and $A_2=\set{2,3}$.
        Prove or disprove the statement: $f(A_1\cap A_2)=f(A_1)\cap f(A_2)$ holds for any function
        $f:A\to B$.

        \begin{solution}
            Consider the function $f:A\to B$ defined as: \[
                f(x)=\begin{cases}
                    a,\quad&x\in\set{1,3},\\
                    c,\quad&x=2.
                \end{cases}
            \]
            Then, the image of $A_1\cap A_2=\set{2}$ is \[
                f(A_1\cap A_2)=f(\set{2})=\set{c},
            \] and the intersection of the images of $A_1$ and $A_2$ is \[
                f(A_1)\cap f(A_2)=f(\set{1,2})\cap f(\set{2,3})=\set{a,c}\cap\set{c,a}=\set{a,c}.
            \]
            Therefore, we have found a counterexample such that the statement does not hold.
            Thus, \fbox{the statement is false}.
        \end{solution}

        \part[6] Prove that for any subsets $A_1, A_2$ of $A$, $f(A_1\cap A_2) = f(A_1)\cap f(A_2)$
        if $f$ is injective.

        \begin{psol}
            If $f$ is injective, then for any $x_1,x_2\in A$ where $x_1\neq x_2$,
            we must have $f(x_1)\neq f(x_2)$. For any arbitrary set $A=\set{a_1,a_2,\ldots}$,
            we have $A'=f(A)=\set{f(a_1),f(a_2),\ldots}$ and $\card{A}=\card{A'}$,
            and for any $A_i\subseteq A$, we also have $A_i'=f(A_i)\subseteq A'$
            and $\card{A_i}=\card{A_i'}$.

            \textbf{Case 1:} $A_1\cap A_2=\mtset$. Then, $f(A_1\cap A_2)=f(\mtset)=\mtset$.
            Also, $f(A_1)\cap f(A_2)=A_1'\cap A_2'=\mtset$ since $A_1\cap A_2=\mtset$.
            Thus, $f(A_1\cap A_2)=f(A_1)\cap f(A_2)$ holds.

            \textbf{Case 2:} $A_1\cap A_2\neq\mtset$. Suppose $A_1$ and $A_2$ has some arbitrary common
            elements $c_1,c_2,\ldots,c_k$ where $k\in[1,\max(\card{A_1},\card{A_2})]$. Then,
            $f(A_1\cap A_2)=\set{f(c_1),f(c_2),\ldots,f(c_k)}$. Also, suppose $A_1$ has some arbitrary
            unique elements $a_{11}, a_{12},\ldots,a_{1m}$ where $m\in[0,\card{A_1}-k]$, and the same for
            $A_2$ with unique elements $a_{21}, a_{22},\ldots,a_{2n}$ where $n\in[0,\card{A_2}-k]$.
            Then, $f(A_1)=\set{f(c_1),f(c_2),\ldots,f(c_k),f(a_{11}),f(a_{12}),\ldots,f(a_{1m})}$ and
            $f(A_2)=\set{f(c_1),f(c_2),\ldots,f(c_k),f(a_{21}),f(a_{22}),\ldots,f(a_{2n})}$.
            Thus, $f(A_1)\cap f(A_2)=\set{f(c_1),f(c_2),\ldots,f(c_k)}=f(A_1\cap A_2)$.
            Therefore, $f(A_1\cap A_2)=f(A_1)\cap f(A_2)$ also holds. 

            \textbf{Conclusion:} Since $f(A_1\cap A_2)=f(A_1)\cap f(A_2)$ holds in both cases,
            \fbox{the statement is true}.
        \end{psol}

    \end{parts}

    \newpage

    \question Asymptotics of Functions

    \begin{parts}
        
        \part[8] For the following functions $f$, $g$, determine whether $f=\bigO(g)$, $f=\Omega(g)$,
        or $f=\Theta(g)$. Justify your answers.

        \begin{subparts}
            
            \subpart $f(n)=2n^2+3n+1$ and $g(n)=n^2$.

            \begin{solution}
                Note that $\forall n\geq0$, we always trivially have $f(n)\geq g(n)$.
                That is, we can choose $c=1$ and $n_0=0$, then $\forall n\geq n_0:f(n)\geq cg(n)$ holds.
                This gives us $f\in\bigOmg(g)$.

                Also note that $\forall n\geq4$, we have $f(n)\leq3g(n)$,
                Then, we can also choose $c=3$ and $n_0=4$, then $\forall n\geq n_0:f(n)\leq cg(n)$ holds.
                This gives us $f\in\bigO(g)$.

                Having shown that $f\in\bigO(g)$ and $f\in\bigOmg(g)$, by definition,
                \fbox{we have $f\in\bigTh(g)$}.
            \end{solution}

            \subpart $f(n)=\log_4 n$ and $g(n)=\log_2 (\log_2 n)$.

            \begin{solution}
                Note that we can transform $f(n)$ as \[
                    f(n)=\frac{\log_2 n}{\log_2 4}=\frac{1}{2}\log_2 n.
                \]

                Then, we examine the growth rates of $f(n)$ and $g(n)$ as $n\to+\infty$:
                \begin{align*}
                    \lim_{n\to+\infty} \frac{f(n)}{g(n)} &=
                    \lim_{n\to+\infty} \frac{\frac{1}{2}\log_2 n}{\log_2(\log_2 n)}\\
                    &= \frac{1}{2} \cdot \lim_{n\to+\infty} \frac{\log_2 n}{\log_2(\log_2 n)}\\
                    &= \frac{1}{2} \cdot \lim_{n\to+\infty} \frac{\frac{\ln n}{\ln 2}}{\frac{\ln(\log_2 n)}{\ln 2}}\\
                    &= \frac{1}{2} \cdot \lim_{n\to+\infty} \frac{\ln n}{\ln(\log_2 n)}\\
                    &= \frac{1}{2} \cdot \lim_{n\to+\infty} \frac{\ln n}{\ln(\frac{\ln n}{\ln 2})}\\
                    &= \frac{1}{2} \cdot \lim_{n\to+\infty} \frac{\ln n}{\ln(\ln n) - \ln(\ln 2)}\\
                    &= +\infty
                \end{align*}

                Therefore, we have $f(n)$ grows asymptotically faster than $g(n)$, i.e., $f\in\bigOmg(g)$.
                We can verify this by choosing $c=1$ and $n_0=16$. Then, $\forall n\geq n_0$,
                we have $f(n)\geq g(n)$. Thus, \fbox{$f\in\bigOmg(g)$}.
            \end{solution}

            \subpart $f(n)=n!$ and $g(n)=100^n$. [Hint: Consider Stirling's formula.]

            \begin{solution}
                By Stirling's formula, we have $
                    n! \approx \sqrt{2\pi n}\left(\frac{n}{e}\right)^n
                $. Then, the limit evaluates as
                $
                    \limninf \frac{f(n)}{g(n)} \approx
                    \limninf \frac{\sqrt{2\pi}n^{n+\frac{1}{2}}e^{-n}}{100^n}
                $.
                We can identify the dominant term being $n^{n+\frac{1}{2}}$, which grows faster than all
                other terms. Thus, the ratio $\frac{f(n)}{g(n)}\to+\infty$ as $n\to+\infty$.

                Therefore, we have $f(n)$ grows asymptotically faster than $g(n)$, 
                i.e., $\boxed{f\in\bigOmg(g)}$.
            \end{solution}

        \end{subparts}

        \newpage

        \part[8] For any function $g:\N\to\N$, define $f_g:\N\to\N$ to be the function \[
            f_g(n)=\underbrace{g\circ\cdots\circ g}_{n\text{ times}}(n-1).
        \]

        Let $g_1$ be the function defined by $g_1(n)=2n+1$ for any $n\in\N$ and $g_2$ be the function
        defined by $g_2(n)=n^2$ for any $n\in\N$. Find a function $h:\N\to\N$ such that all the following
        requirements are satisfied:
        \begin{itemize}
            \item $h\in\bigOmg(f_{g_1})$ but $h\notin\bigO(f_{g_1})$;
            \item $h\in\bigO(f_{g_2})$ but $h\notin\bigOmg(f_{g_2})$.
        \end{itemize}
        Justify your answer.

        \begin{solution}
            First, we observe the behaviour of $f_{g_1}$:
            \begin{align*}
                f_{g_1}(0) &= 0,\\
                f_{g_1}(1) &= g_1(n-1)\big|_{n=1} = 2n-1\big|_{n=1} = 1,\\
                f_{g_1}(2) &= g_1(2n-1)\big|_{n=2} = 4n-1\big|_{n=2} = 7,\\
                f_{g_1}(3) &= g_1(4n-1)\big|_{n=3} = 8n-1\big|_{n=3} = 23,\\
                f_{g_1}(4) &= g_1(8n-1)\big|_{n=4} = 16n-1\big|_{n=4} = 63,\\
                &\cdots
            \end{align*}
            We can see the coefficient of the dominant term $n$ is $2^n$. Also, in each iteration,
            the coefficient is multiplied by $n$ and some abitrary number is added. Then, we can identify
            the dominant term of $f_{g_1}(n)$ being $2^n n$.

            Similarly, we observe the behaviour of $f_{g_2}$:
            \begin{align*}
                f_{g_2}(0) &= 0,\\
                f_{g_2}(1) &= g_2(n-1)\big|_{n=1} = (n-1)^2\big|_{n=1} = 0,\\
                f_{g_2}(2) &= g_2((n-1)^2)\big|_{n=2} = (n-1)^4\big|_{n=2} = 1,\\
                f_{g_2}(3) &= g_2((n-1)^4)\big|_{n=3} = (n-1)^8\big|_{n=3} = 256,\\
                f_{g_2}(4) &= g_2((n-1)^8)\big|_{n=4} = (n-1)^{16}\big|_{n=4} = 43,046,721,\\
                &\cdots
            \end{align*}
            The exponent of the dominant term $n$ is $2^n$. Then, the dominant term of $f_{g_2}(n)$
            is $n^{2^n}$.

            We would like to find a function $h:\N\to\N$ such that at large $n$, $h$ grows asymptotically
            faster than $f_{g_1}$ but slower than $f_{g_2}$. We choose $h(n)=n^n$.

            Consider the ratio $\frac{h(n)}{f_{g_1}(n)} = \frac{n^n}{2^n n} = \frac{n^{n-1}}{2^n}$
            as $n\to+\infty$. It is clear that $n^{n-1}$ grows much faster than $2^n$.
            Thus, $\limninf \frac{h(n)}{f_{g_1}(n)} = +\infty$, which implies that
            $h\in\bigOmg(f_{g_1})$ but $h\notin\bigO(f_{g_1})$.

            Now, consider the ratio $\frac{h(n)}{f_{g_2}(n)} = \frac{n^n}{n^{2^n}} = \frac{1}{n^{2^n-n}}$
            as $n\to+\infty$. It is trivial to show that $\limninf \frac{h(n)}{f_{g_2}(n)} = 0$,
            which implies that $h\in\bigO(f_{g_2})$ but $h\notin\bigOmg(f_{g_2})$.

            Therefore, we have found a function $\boxed{h(n)=n^n}$ that satisfies all the requirements.
        \end{solution}

    \end{parts}

    \newpage

    \question Basic Counting

    \begin{parts}
        
        \part[4] Among all positive numbers that devide 4050 exactly, how many are multiples of 45?

        \part[4] There are 2 identical red balls and 3 identical black balls.
        You are going to put them into 5 different boxes.
        If each box can contain at most 2 balls, how many ways are there to put the balls in the boxes?

        \part[4] In a game, the player needs to move from the point $(0,0)$ to the point $(a,b)$ where
        $a\geq b>0$ are integers. At each point $(x,y)$, the player can either move right to $(x+1,y)$
        or move up to $(x,y+1)$. It is forbidden to move up for two successive times.
        How many different ways are there for the player to reach $(a,b)$?

    \end{parts}

    \newpage

    \question Counting Sets and Relations

    \begin{parts}
        
        \part[4] In a group of 15 computer scientists, each scientist has collaborated with at least 8
        other members of the group. Prove that there exist 3 members, such that each one of them has
        collaborated with the other two members.

        \part[6] Let $A$, $B$, $C$ be sets with $\card{A}=\card{B}=\card{C}=n$ and
        $\card{A\cup B\cup C}=m$. Find the minimal value of $\card{A\cap B\cap C}$.

        \part[6] Let $A$ be a set with $\card{A}=5$. Count the number of distinct
        \begin{enumerate*}[label=(\roman*)]
            \item symmetric relations and
            \item assymetric relations
        \end{enumerate*} that can be constructed on $A$.
        An assymetric relation $R$ is a relation such that, for every pair of distinct $x$ and $y$,
        $x\rel y\Rightarrow\neg(y\rel x)$.

    \end{parts}

    \newpage

    \question Pigeonhole

    \begin{parts}
        
        \part[4] Show that if you have a set $A$ of 5 points $(x_i, y_i)\in\Z^2$, there must exist
        distinct $j, k$ such that, for $(x_j, y_j),(x_k,y_k)\in A$, the midpoint
        $\displaystyle\left(\frac{x_j+x_k}{2},\frac{y_j+y_k}{2}\right)$ also lies in $\Z^2$.

        \part[4] For any $n\in\N$, prove that for any collection of $n+1$ distinct numbers drawn
        from $\set{1,2,\ldots,2n}$, there must be at least one pair of numbers such that one of them
        is a multiple of the other.

    \end{parts}

    \newpage

    \question Conditional Probability

    You are training a classifier for spam detection using machine learning. Each data point $(x,y)$ in the
    dataset represents an email, which can be categorized as either spam or non-spam, with the content of
    the email denoted as $x$ and a label $y\in{\text{spam},\text{non-spam}}$.

    \begin{parts}
        
        \part[4] Given that 10\% of the data in the dataset is labelled as spam and 90\% is labelled
        as non-spam, and that the model's output satisfies the following conditions: \[
            P(\text{output}=\text{spam}\mid\text{label}=\text{spam})=0.8,\quad
            P(\text{output}=\text{spam}\mid\text{label}=\text{non-spam})=0.9,
        \] determine the probability that the model's output matches the true label when the input is
        randomly selected from the dataset.

        \part[4] Continuing from part (\ref{part@8@1}), calculate the probability that the
        true label is spam given that the model predicts spam.

        \part[4] Suppose the labels are manually provided by users, introducing noise in the dataset. 
        This means some emails have incorrect labels (i.e., the label has been flipped from spam to
        non-spam or vice versa). With the same conditions as in part (\ref{part@8@1}), and given that
        5\% of the emails have incorrect labels, determine the probability that the model categorizes
        a random email from the dataset correctly, regardless of whether the label is accurate.

        \part[4] There are $n$ passengers queuing to board a bus one by one.
        Each passenger has an assigned seat. However, the first passenger does not follow the seating
        arrangement and chooses a seat at random. Subsequently, each passenger takes their assigned
        seat if it is available; otherwise, they select a seat uniformly at random from the remaining
        unoccupied seats. Determine the probability that the last passenger sits in the assigned seat.

        \part[4] A family has two children. It is known that at least one of them is a girl born on
        a Monday. What is the probability that both children are girls?

    \end{parts}

\end{questions}

\end{document}